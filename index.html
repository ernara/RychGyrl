<!DOCTYPE HTML>
<html>
	<div class="col-xl-1 resizable"  id="inputs" style=" width: 100%; height: 20%;  ">
		<p>Pradinė suma:<input type="number" name="ps" id="ps" /></p>
		<p>Procentai:<input type="number" name="p" id="p" /></p>
		<p>Metai:<input type="number" name="m" id="m" /></p>
		<p>Investuojama suma per mėnesį: <input type="number" name="is" id="is" /></p>
		<p>Mėnesinės palūkanos: <input type="checkbox" name = "mp", id="mp"/></p>
		<p><button class="btn btn-primary" id="train" type="submit" >Braižyti</button></p>
		
		
	</div>

<head>  
<meta charset="UTF-8">


<script>
window.onload = function () {

	var dps = [];
	var chart = new CanvasJS.Chart("chartContainer", {
	animationEnabled: true,
	title:{
      text: "Rych Gyrl",
      },
      axisX: {
		title: "Metai",
		interval:1,
		minimum:0,
	  },
	  axisY:{
		title: "Pinigai",
	  },
	data: [{        
		type: "line",       
		dataPoints: dps
	}]
});
	function myFunction() {
	dps.length = 0;
	var ps = document.getElementById("ps").value;
	var p = document.getElementById("p").value;
	var m = document.getElementById("m").value;
	var is = document.getElementById("is").value;
	var mp = document.getElementById("mp").checked;
	
	dps.push({
		x: 0,
		y: parseFloat(ps)
	});

	var che = 1;

	if (mp)
	{
		che = 12;
	}

	

	for (i = 1; i <= m*che ;i++) {
		ps = parseFloat(ps)+parseFloat(ps)/100*parseFloat(p)/che+parseFloat(is)*12/che ;
		ps = parseFloat(ps).toFixed(2);
		if (i%che==0)
		{
			dps.push({
			x: i/che, 
			y: parseFloat(ps)
    	});
		}
	}
	
	var intervalas=parseInt(dps[dps.length-1].y/20);
	chart.options.axisY.interval= intervalas-intervalas%(Math.pow(10,(Math.floor(Math.log10(intervalas)))));
	chart.render();

	}
	
	var renderButton = document.getElementById("train");
	window.resizeTo(screen.width-300,screen.height-500);
	renderButton.addEventListener("click", myFunction);
	chart.render();
	
}


</script>
</head>
<body>
<div id="chartContainer" style=" position: relative; height: 80%; width: 90%; bottom: 0px;   "  ></div>
<script src="canvasjs.min.js"></script>
</body>
</html>